<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Upload Audio File</title>
    
    <script src="https://unpkg.com/dropzone@5/dist/min/dropzone.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/dropzone@5/dist/min/dropzone.min.css" type="text/css" />
    <style>
        body {
            background: rgb(0,8,37);
            background: radial-gradient(circle, rgba(0,8,37,1) 0%, rgba(40,18,164,1) 51%, rgba(18,27,148,1) 60%, rgba(28,56,187,1) 65%, rgba(16,41,175,1) 68%, rgba(60,30,196,1) 78%, rgba(0,8,37,1) 90%); 
            height: 100vh;
            overflow: hidden;
            color: white; /* Optional: Change text color to contrast with the background */
            font-family: Arial, sans-serif; /* Optional: Change font family */
            position: relative; /* Needed for positioning fish */
        }
        .container{
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 100px; /* Adjust this value to move the Dropzone down */
        }
        .dropzone{
            width: 600px; /* Set the width of the circle */
            height: 600px; /* Set the height of the circle */
            border-radius: 50%; /* Make it circular */
            border: 2px dashed #ffffff; /* Example of custom border color */
            background: rgba(255, 255, 255, 0.1); /* Optional: Semi-transparent background */
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        .dz-message{
            color: white; /* Optional: Change text color to contrast with the background */
        }

        .fish {
            position: absolute;
            width: 50px; /* Adjust the size of the fish */
            height: auto;
            display: none; /* Initially hide the fish */
            animation: swim linear infinite;
            pointer-events: none; /* Ensure fish are not interactable */
        }

        @keyframes swim-left {
            from {
                transform: translateX(-50px);
            }
            to {
                transform: translateX(calc(100vw + 50px));
            }
        }

        @keyframes swim-right {
            from {
                transform: translateX(calc(100vw + 50px));
            }
            to {
                transform: translateX(-50px);
            }
        }
    </style>
    
    <script>
        Dropzone.options.myDropzone = {
            paramName: "file", // The name that will be used to transfer the file
            maxFilesize: 50, // MB
            acceptedFiles: 'audio/*',
            dictDefaultMessage: "Drop audio files here or click to upload",
            uploadMultiple: false,

            init: function() {
                this.on("success", function(file, response) { 
                    window.location.href = "/result"; // Redirect to the result page
                });
            }
        };

        // JavaScript to generate fish elements and animate them
        document.addEventListener("DOMContentLoaded", function() {
            const fishImages = ["{{ url_for('static', filename='fish.png')}}"]; // Add paths to your fish images here
            const numberOfFish = 10; // Number of fish to display

            for (let i = 0; i < numberOfFish; i++) {
                let fish = document.createElement('img');
                fish.src = fishImages[Math.floor(Math.random() * fishImages.length)];
                fish.classList.add('fish');
                fish.style.top = Math.random() * 100 + 'vh';
                fish.style.animationDuration = Math.random() * 10 + 5 + 's';
                fish.style.animationDelay = Math.random() * 5 + 's';
                let direction = Math.random() < 0.5 ? 'left' : 'right';
                fish.style.animationName = direction === 'left' ? 'swim-left' : 'swim-right';
                fish.style.transform = direction === 'left' ? 'scaleX(1)' : 'scaleX(-1)';
                document.body.appendChild(fish);

                // Show the fish after adding to the DOM
                setTimeout(() => {
                    fish.style.display = 'block';
                }, 100);
            }
        });
    </script>
</head>
<body>
    <h1 style="text-align:center">Upload Audio File</h1>
    <div class="container">
        <!-- 
            //TODO: Add column for link to hopespot / location of the recording , if defined 
            //TOOD: Allow for multiple files to be uploaded at once
        -->

        <form action="{{ url_for('upload_file') }}" class="dropzone" id="myDropzone">  </form>
    </div>
</body>
</html>
